<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Serial Thrillers Bookstore</title>
    <meta name="description" content="Serial Thrillers Bookstore - Est 2018. Thrillers, Classics, Collectibles & Comics in Emmarentia.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'thriller-red': '#b91c1c',
                        'thriller-black': '#1a1a1a',
                        'paper': '#f5f5f4',
                    },
                    fontFamily: {
                        serif: ['Georgia', 'Cambria', '"Times New Roman"', 'Times', 'serif'],
                        sans: ['ui-sans-serif', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in-down': 'fadeInDown 0.5s ease-out',
                        'fade-in': 'fadeIn 0.3s ease-out',
                    },
                    keyframes: {
                        fadeInDown: {
                            '0%': { opacity: '0', transform: 'translateY(-10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f5f5f4;
        }
        ::-webkit-scrollbar-thumb {
            background: #b91c1c;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #991b1b;
        }
        
        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }
        
        /* Image loading placeholder */
        .image-placeholder {
            background: linear-gradient(110deg, #ececec 8%, #f5f5f5 18%, #ececec 33%);
            background-size: 200% 100%;
            animation: shine 1.5s linear infinite;
        }
        
        @keyframes shine {
            to {
                background-position-x: -200%;
            }
        }
    </style>
</head>
<body class="bg-paper text-thriller-black font-sans antialiased selection:bg-thriller-red selection:text-white">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // Initialize Lucide icons after render
        const useLucide = () => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            });
        };

        // View State Enum
        const ViewState = {
            HOME: 'HOME',
            GALLERY: 'GALLERY',
            MARKETPLACE: 'MARKETPLACE',
            CONTACT: 'CONTACT'
        };

        // --- Components ---

        // 1. Navbar Component
        const Navbar = ({ currentView, onChangeView }) => {
            const [isMenuOpen, setIsMenuOpen] = useState(false);
            useLucide();

            const navItems = [
                { view: ViewState.HOME, label: 'Home', icon: 'book-open' },
                { view: ViewState.GALLERY, label: 'Gallery', icon: 'image' },
                { view: ViewState.MARKETPLACE, label: 'Community Market', icon: 'shopping-bag' },
                { view: ViewState.CONTACT, label: 'Find Us', icon: 'phone' },
            ];

            const handleNavClick = (view) => {
                onChangeView(view);
                setIsMenuOpen(false);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            return (
                <nav className="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md border-b border-stone-200">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex justify-between h-16 items-center">
                            <div 
                                className="flex-shrink-0 flex items-center cursor-pointer" 
                                onClick={() => handleNavClick(ViewState.HOME)}
                            >
                                <span className="font-serif text-2xl font-bold tracking-tight text-thriller-black">
                                    SERIAL <span className="text-thriller-red">THRILLERS</span>
                                </span>
                            </div>

                            <div className="hidden md:flex space-x-1">
                                {navItems.map((item) => (
                                    <button
                                        key={item.label}
                                        onClick={() => handleNavClick(item.view)}
                                        className={`flex items-center space-x-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200
                                            ${currentView === item.view 
                                                ? 'text-white bg-thriller-red shadow-md' 
                                                : 'text-stone-600 hover:text-thriller-red hover:bg-stone-100'
                                            }`}
                                    >
                                        <i data-lucide={item.icon} className="w-4 h-4"></i>
                                        <span>{item.label}</span>
                                    </button>
                                ))}
                            </div>

                            <div className="flex items-center md:hidden">
                                <button
                                    onClick={() => setIsMenuOpen(!isMenuOpen)}
                                    className="p-2 rounded-md text-stone-600 hover:text-thriller-red hover:bg-stone-100 focus:outline-none transition-colors"
                                >
                                    <i data-lucide={isMenuOpen ? "x" : "menu"} className="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    {isMenuOpen && (
                        <div className="md:hidden bg-white border-t border-stone-100 absolute w-full shadow-lg animate-fade-in-down">
                            <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                                {navItems.map((item) => (
                                    <button
                                        key={item.label}
                                        onClick={() => handleNavClick(item.view)}
                                        className={`w-full flex items-center space-x-3 px-3 py-4 rounded-md text-base font-medium transition-colors
                                            ${currentView === item.view 
                                                ? 'text-thriller-red bg-stone-50' 
                                                : 'text-stone-600 hover:text-thriller-red hover:bg-stone-50'
                                            }`}
                                    >
                                        <i data-lucide={item.icon} className="w-5 h-5"></i>
                                        <span>{item.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}
                </nav>
            );
        };

        // 2. Hero Component
        const Hero = ({ onNavigate }) => {
            return (
                <div className="relative bg-stone-900 text-white overflow-hidden min-h-[70vh] flex items-center">
                    <div className="absolute inset-0">
                        <img
                            className="w-full h-full object-cover opacity-40"
                            src="https://images.unsplash.com/photo-1507842217153-e21f2010dc6f?q=80&w=2000&auto=format&fit=crop"
                            alt="Vintage Bookstore Atmosphere"
                            onError={(e) => {
                                e.target.src = 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?auto=format&fit=crop&w=2000';
                            }}
                        />
                        <div className="absolute inset-0 bg-gradient-to-r from-stone-900 via-stone-900/80 to-transparent" />
                    </div>

                    <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
                        <div className="max-w-2xl">
                            <h1 className="text-5xl md:text-7xl font-serif font-bold tracking-tight text-white mb-6 drop-shadow-2xl">
                                Serial <span className="text-thriller-red">Thrillers</span>
                            </h1>
                            <p className="mt-4 text-xl md:text-2xl text-stone-200 font-light leading-relaxed">
                                Emmarentia's home for rare books, vintage comics, and collectibles. 
                                <span className="block mt-2 text-lg text-stone-400">Est. 2018 by Dave.</span>
                            </p>
                            <div className="mt-10 flex flex-col sm:flex-row gap-4">
                                <button
                                    onClick={() => onNavigate(ViewState.MARKETPLACE)}
                                    className="inline-flex items-center justify-center px-8 py-4 border border-transparent text-base font-bold rounded-full text-white bg-thriller-red hover:bg-red-700 transition-all shadow-lg shadow-red-900/50 hover:shadow-red-900/70 hover:-translate-y-0.5"
                                >
                                    Browse Community Market
                                    <i data-lucide="chevron-right" className="ml-2 w-5 h-5"></i>
                                </button>
                                <button
                                    onClick={() => onNavigate(ViewState.CONTACT)}
                                    className="inline-flex items-center justify-center px-8 py-4 border-2 border-stone-400 text-base font-bold rounded-full text-stone-200 bg-transparent hover:bg-white/10 hover:border-white transition-all backdrop-blur-sm"
                                >
                                    Visit Store
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 3. Gallery Component (Fixed for Mobile)
        const Gallery = () => {
            const [loadedImages, setLoadedImages] = useState({});
            useLucide();

            const images = [
                { src: 'https://i.imgur.com/eWGbb9i.jpeg', alt: 'Storefront Sign', caption: 'Our iconic sign on Thomas Bowler St.', aspect: 'aspect-[3/4]' },
                { src: 'https://i.imgur.com/ILcYTz8.jpeg', alt: 'Batman Cowl', caption: 'Eclectic decor and collectibles.', aspect: 'aspect-square' },
                { src: 'https://i.imgur.com/YpaTO7O.jpeg', alt: 'Dave at Counter', caption: 'Dave ready to help you find your next read.', aspect: 'aspect-[4/3]' },
                { src: 'https://i.imgur.com/qldpNY6.jpeg', alt: 'Asterix Comics', caption: 'A vast collection of comics including Asterix.', aspect: 'aspect-[3/4]' },
                { src: 'https://i.imgur.com/9I5cAbo.jpeg', alt: 'Mad Magazines', caption: 'Classic MAD magazines available.', aspect: 'aspect-square' },
                { src: 'https://i.imgur.com/Qfs6gQg.jpeg', alt: 'Dr Seuss', caption: 'Books for all ages and interests.', aspect: 'aspect-[4/3]' },
                { src: 'https://i.imgur.com/mzMIuQh.jpeg', alt: 'Batman Art', caption: 'Unique artwork and posters.', aspect: 'aspect-[3/4]' },
                { src: 'https://i.imgur.com/Aestkur.jpeg', alt: 'Display Cabinet', caption: 'Rare figures and vintage items.', aspect: 'aspect-square' },
            ];

            const handleImageLoad = (index) => {
                setLoadedImages(prev => ({ ...prev, [index]: true }));
            };

            return (
                <div className="bg-paper py-16 px-4 sm:px-6 lg:px-8">
                    <div className="max-w-7xl mx-auto">
                        <div className="text-center mb-12">
                            <h2 className="text-3xl md:text-4xl font-serif font-bold text-thriller-black">Inside the Store</h2>
                            <p className="mt-4 text-lg text-stone-600">A glimpse into our world of stories and treasures.</p>
                        </div>

                        {/* Responsive Grid: 1 col mobile, 2 col tablet, 3 col desktop */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                            {images.map((img, index) => (
                                <div 
                                    key={index} 
                                    className="group relative rounded-xl overflow-hidden shadow-lg bg-white border border-stone-200 hover:shadow-2xl transition-all duration-300 hover:-translate-y-1"
                                >
                                    <div className={`relative w-full ${img.aspect} bg-stone-200 overflow-hidden`}>
                                        {!loadedImages[index] && (
                                            <div className="absolute inset-0 image-placeholder" />
                                        )}
                                        <img
                                            src={img.src}
                                            alt={img.alt}
                                            loading="lazy"
                                            onLoad={() => handleImageLoad(index)}
                                            className={`w-full h-full object-cover transform transition-transform duration-700 group-hover:scale-110
                                                ${loadedImages[index] ? 'opacity-100' : 'opacity-0'}`}
                                            onError={(e) => {
                                                e.target.src = `https://placehold.co/600x800/1a1a1c/b91c1c?text=${encodeURIComponent(img.alt)}`;
                                                handleImageLoad(index);
                                            }}
                                        />
                                        <div className="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                                            <p className="text-white font-medium text-lg translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
                                                {img.caption}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // 4. Marketplace Component
        const Marketplace = () => {
            const [items, setItems] = useState([]);
            const [showForm, setShowForm] = useState(false);
            const [isLoading, setIsLoading] = useState(false);
            useLucide();

            // Form State
            const [formData, setFormData] = useState({
                title: '',
                description: '',
                price: '',
                contact: '',
                seller: '',
                imageFile: null
            });
            const [imagePreview, setImagePreview] = useState(null);

            useEffect(() => {
                const savedItems = localStorage.getItem('serial-thrillers-marketplace');
                if (savedItems) {
                    try {
                        setItems(JSON.parse(savedItems));
                    } catch (e) {
                        console.error("Failed to load items", e);
                    }
                }
            }, []);

            const handleImageChange = (e) => {
                if (e.target.files && e.target.files[0]) {
                    const file = e.target.files[0];
                    if (file.size > 2 * 1024 * 1024) {
                        alert("Image is too large. Please choose an image under 2MB.");
                        return;
                    }
                    setFormData({...formData, imageFile: file});
                    
                    const reader = new FileReader();
                    reader.onloadend = () => setImagePreview(reader.result);
                    reader.readAsDataURL(file);
                }
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                setIsLoading(true);

                const processSubmission = (base64Image) => {
                    const newItem = {
                        id: Date.now().toString(),
                        title: formData.title,
                        description: formData.description,
                        price: formData.price,
                        contactInfo: formData.contact,
                        sellerName: formData.seller,
                        imageUrl: base64Image,
                        createdAt: Date.now()
                    };

                    const updatedItems = [newItem, ...items];
                    setItems(updatedItems);
                    localStorage.setItem('serial-thrillers-marketplace', JSON.stringify(updatedItems));
                    
                    setFormData({ title: '', description: '', price: '', contact: '', seller: '', imageFile: null });
                    setImagePreview(null);
                    setShowForm(false);
                    setIsLoading(false);
                };

                if (formData.imageFile) {
                    const reader = new FileReader();
                    reader.onloadend = () => processSubmission(reader.result);
                    reader.readAsDataURL(formData.imageFile);
                } else {
                    processSubmission('https://images.unsplash.com/photo-1544947950-fa07a98d237f?auto=format&fit=crop&w=400&q=80');
                }
            };

            const handleDelete = (id) => {
                if (confirm('Are you sure you want to remove this listing?')) {
                    const updatedItems = items.filter(item => item.id !== id);
                    setItems(updatedItems);
                    localStorage.setItem('serial-thrillers-marketplace', JSON.stringify(updatedItems));
                }
            };

            return (
                <div className="bg-stone-50 min-h-screen py-12 px-4 sm:px-6 lg:px-8">
                    <div className="max-w-5xl mx-auto">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4">
                            <div>
                                <h2 className="text-3xl md:text-4xl font-serif font-bold text-thriller-black">Community Market</h2>
                                <p className="text-stone-600 mt-2">
                                    Got a collectible to sell? Post it here for the community.
                                </p>
                            </div>
                            <button
                                onClick={() => setShowForm(!showForm)}
                                className="flex items-center space-x-2 bg-thriller-red text-white px-6 py-3 rounded-full shadow-lg hover:bg-red-700 transition-all hover:shadow-xl hover:-translate-y-0.5"
                            >
                                <i data-lucide={showForm ? "x" : "plus"} className="w-5 h-5"></i>
                                <span className="font-bold">{showForm ? 'Cancel' : 'Sell an Item'}</span>
                            </button>
                        </div>

                        {showForm && (
                            <div className="bg-white rounded-2xl shadow-xl p-6 mb-10 border border-stone-200 animate-fade-in-down">
                                <h3 className="text-xl font-bold mb-6 text-stone-800 border-b pb-2">Create New Listing</h3>
                                <form onSubmit={handleSubmit} className="space-y-5">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                                        <div>
                                            <label className="block text-sm font-semibold text-stone-700 mb-1">Item Title</label>
                                            <input required type="text" value={formData.title} onChange={e => setFormData({...formData, title: e.target.value})} className="block w-full rounded-lg border-stone-300 bg-stone-50 border p-3 focus:ring-2 focus:ring-thriller-red focus:border-transparent outline-none transition-all" placeholder="e.g. Vintage Batman Comic" />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold text-stone-700 mb-1">Price (R)</label>
                                            <input required type="text" value={formData.price} onChange={e => setFormData({...formData, price: e.target.value})} className="block w-full rounded-lg border-stone-300 bg-stone-50 border p-3 focus:ring-2 focus:ring-thriller-red focus:border-transparent outline-none transition-all" placeholder="e.g. R450" />
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-semibold text-stone-700 mb-1">Description</label>
                                        <textarea required value={formData.description} onChange={e => setFormData({...formData, description: e.target.value})} rows={3} className="block w-full rounded-lg border-stone-300 bg-stone-50 border p-3 focus:ring-2 focus:ring-thriller-red focus:border-transparent outline-none transition-all" placeholder="Describe condition, year, etc..." />
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                                        <div>
                                            <label className="block text-sm font-semibold text-stone-700 mb-1">Your Name</label>
                                            <input required type="text" value={formData.seller} onChange={e => setFormData({...formData, seller: e.target.value})} className="block w-full rounded-lg border-stone-300 bg-stone-50 border p-3 focus:ring-2 focus:ring-thriller-red focus:border-transparent outline-none transition-all" placeholder="Jane Doe" />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-semibold text-stone-700 mb-1">Contact Info</label>
                                            <input required type="text" value={formData.contact} onChange={e => setFormData({...formData, contact: e.target.value})} className="block w-full rounded-lg border-stone-300 bg-stone-50 border p-3 focus:ring-2 focus:ring-thriller-red focus:border-transparent outline-none transition-all" placeholder="082 123 4567" />
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-semibold text-stone-700 mb-2">Photo</label>
                                        <div className="flex items-center gap-4">
                                            <label className="cursor-pointer flex items-center justify-center px-4 py-3 border-2 border-dashed border-stone-300 rounded-lg text-stone-600 hover:border-thriller-red hover:text-thriller-red transition-colors bg-white">
                                                <i data-lucide="camera" className="w-5 h-5 mr-2"></i>
                                                <span>{formData.imageFile ? 'Change Photo' : 'Upload Photo'}</span>
                                                <input type="file" accept="image/*" onChange={handleImageChange} className="hidden" />
                                            </label>
                                            {imagePreview && (
                                                <div className="h-16 w-16 rounded-lg overflow-hidden border border-stone-200">
                                                    <img src={imagePreview} alt="Preview" className="h-full w-full object-cover" />
                                                </div>
                                            )}
                                        </div>
                                    </div>

                                    <button
                                        type="submit"
                                        disabled={isLoading}
                                        className="w-full bg-thriller-black text-white py-4 rounded-lg font-bold hover:bg-stone-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg"
                                    >
                                        {isLoading ? 'Posting...' : 'Post Item'}
                                    </button>
                                </form>
                            </div>
                        )}

                        <div className="space-y-6">
                            {items.length === 0 ? (
                                <div className="text-center py-20 bg-white rounded-2xl border-2 border-dashed border-stone-300">
                                    <i data-lucide="tag" className="w-16 h-16 text-stone-300 mx-auto mb-4"></i>
                                    <p className="text-stone-500 text-lg font-medium">No items listed yet. Be the first to sell!</p>
                                </div>
                            ) : (
                                items.map((item) => (
                                    <div key={item.id} className="bg-white rounded-2xl shadow-md overflow-hidden border border-stone-100 flex flex-col md:flex-row hover:shadow-xl transition-shadow">
                                        <div className="md:w-2/5 h-64 md:h-auto relative bg-stone-200">
                                            <img 
                                                src={item.imageUrl} 
                                                alt={item.title}
                                                className="w-full h-full object-cover"
                                                loading="lazy"
                                                onError={(e) => {
                                                    e.target.src = 'https://placehold.co/400x300/1a1a1c/b91c1c?text=No+Image';
                                                }}
                                            />
                                            <div className="absolute top-3 left-3 bg-thriller-red text-white text-xs font-bold px-3 py-1 rounded-full shadow-md">
                                                FOR SALE
                                            </div>
                                        </div>

                                        <div className="p-6 md:w-3/5 flex flex-col justify-between">
                                            <div>
                                                <div className="flex justify-between items-start mb-2">
                                                    <h3 className="text-2xl font-bold text-thriller-black leading-tight">{item.title}</h3>
                                                    <span className="text-xl font-bold text-thriller-red bg-red-50 px-3 py-1 rounded-lg whitespace-nowrap ml-2">{item.price}</span>
                                                </div>
                                                <p className="text-stone-400 text-xs mb-4 font-medium uppercase tracking-wide">
                                                    Posted by {item.sellerName} • {new Date(item.createdAt).toLocaleDateString()}
                                                </p>
                                                <p className="text-stone-600 leading-relaxed">
                                                    {item.description}
                                                </p>
                                            </div>

                                            <div className="mt-6 pt-4 border-t border-stone-100 flex flex-col sm:flex-row justify-between items-center gap-4">
                                                <a 
                                                    href={`tel:${item.contactInfo.replace(/\s/g,'')}`}
                                                    className="flex items-center justify-center w-full sm:w-auto text-stone-700 bg-stone-100 px-6 py-3 rounded-lg hover:bg-stone-200 transition-colors font-mono font-bold"
                                                >
                                                    <i data-lucide="phone" className="w-4 h-4 mr-2 text-thriller-red"></i>
                                                    {item.contactInfo}
                                                </a>
                                                <button 
                                                    onClick={() => handleDelete(item.id)}
                                                    className="text-stone-400 hover:text-red-500 text-sm flex items-center px-3 py-2 rounded hover:bg-red-50 transition-colors"
                                                >
                                                    <i data-lucide="trash-2" className="w-4 h-4 mr-1"></i>
                                                    Remove
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // 5. Contact Component
        const Contact = () => {
            useLucide();
            
            return (
                <div className="bg-white min-h-screen py-12 px-4 sm:px-6 lg:px-8">
                    <div className="max-w-7xl mx-auto">
                        <div className="text-center mb-16">
                            <h2 className="text-3xl md:text-4xl font-serif font-bold text-thriller-black">Visit Us</h2>
                            <p className="mt-4 text-stone-600 text-lg">We love chatting about books. Drop by or send us a message.</p>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div className="space-y-6">
                                <div className="bg-stone-50 p-8 rounded-2xl border border-stone-200 shadow-sm hover:shadow-md transition-shadow">
                                    <div className="flex items-center mb-4 text-thriller-red">
                                        <i data-lucide="map-pin" className="w-6 h-6 mr-3"></i>
                                        <h3 className="text-xl font-bold text-thriller-black">Location</h3>
                                    </div>
                                    <p className="text-stone-700 text-lg leading-relaxed pl-9">
                                        Johannesburg Botanical Gardens<br/>
                                        45 Thomas Bowler St<br/>
                                        Emmarentia, Randburg, 2000
                                    </p>
                                    <a 
                                        href="https://maps.app.goo.gl/cdUT5zpKuhiSUDB6A" 
                                        target="_blank" 
                                        rel="noreferrer"
                                        className="mt-4 inline-block text-thriller-red font-bold hover:underline pl-9"
                                    >
                                        Get Directions →
                                    </a>
                                </div>

                                <div className="bg-stone-50 p-8 rounded-2xl border border-stone-200 shadow-sm hover:shadow-md transition-shadow">
                                    <div className="flex items-center mb-4 text-thriller-red">
                                        <i data-lucide="phone" className="w-6 h-6 mr-3"></i>
                                        <h3 className="text-xl font-bold text-thriller-black">Contact Dave</h3>
                                    </div>
                                    <div className="pl-9 space-y-3">
                                        <a href="tel:0813322109" className="text-xl text-stone-800 hover:text-thriller-red transition-colors block font-medium">
                                            081 332 2109
                                        </a>
                                        <a 
                                            href="https://wa.me/27813322109" 
                                            target="_blank" 
                                            rel="noreferrer"
                                            className="inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-full font-bold hover:bg-green-700 transition-all shadow-md hover:shadow-lg"
                                        >
                                            <i data-lucide="message-circle" className="w-5 h-5 mr-2"></i>
                                            WhatsApp Chat
                                        </a>
                                    </div>
                                </div>

                                <div className="bg-stone-50 p-8 rounded-2xl border border-stone-200 shadow-sm hover:shadow-md transition-shadow">
                                    <div className="flex items-center mb-4 text-thriller-red">
                                        <i data-lucide="clock" className="w-6 h-6 mr-3"></i>
                                        <h3 className="text-xl font-bold text-thriller-black">Trading Hours</h3>
                                    </div>
                                    <ul className="pl-9 space-y-3 text-stone-700">
                                        <li className="flex justify-between border-b border-stone-200 pb-2">
                                            <span>Mon - Fri</span> 
                                            <span className="font-bold">9:00 AM - 5:00 PM</span>
                                        </li>
                                        <li className="flex justify-between border-b border-stone-200 pb-2">
                                            <span>Saturday</span> 
                                            <span className="font-bold">9:00 AM - 2:00 PM</span>
                                        </li>
                                        <li className="flex justify-between text-stone-400">
                                            <span>Sunday</span> 
                                            <span>Closed</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div className="h-[500px] lg:h-auto rounded-2xl overflow-hidden shadow-lg border border-stone-200 bg-stone-100 relative">
                                <iframe 
                                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3580.860166677934!2d28.00067607541427!3d-26.16874497709715!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1e950b7190000001%3A0x123456789abc!2s45%20Thomas%20Bowler%20St%2C%20Emmarentia%2C%20Randburg%2C%202195%2C%20South%20Africa!5e0!3m2!1sen!2sus!4v1700000000000!5m2!1sen!2sus" 
                                    width="100%" 
                                    height="100%" 
                                    style={{border:0}} 
                                    allowFullScreen={true} 
                                    loading="lazy" 
                                    referrerPolicy="no-referrer-when-downgrade"
                                    title="Store Location"
                                ></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 6. Intro Section Component
        const IntroSection = () => (
            <div className="bg-paper py-20 px-4 relative overflow-hidden">
                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-thriller-red to-transparent opacity-30"></div>
                <div className="max-w-3xl mx-auto text-center relative z-10">
                    <h2 className="text-3xl md:text-4xl font-serif font-bold mb-8 text-thriller-black">More Than Just Books</h2>
                    <p className="text-lg md:text-xl text-stone-700 leading-relaxed font-light">
                        Established in 2018, Serial Thrillers is a haven for those who love the smell of old paper, the thrill of a mystery, and the nostalgia of vintage comics. Whether you're hunting for a rare first edition, a classic vinyl record, or a quirky collectible, Dave's collection has something for everyone.
                    </p>
                    <div className="mt-10 flex justify-center">
                        <div className="h-1 w-20 bg-thriller-red rounded-full"></div>
                    </div>
                </div>
            </div>
        );

        // --- Main App Component ---
        const App = () => {
            const [currentView, setCurrentView] = useState(ViewState.HOME);

            const renderContent = () => {
                switch (currentView) {
                    case ViewState.HOME:
                        return (
                            <>
                                <Hero onNavigate={setCurrentView} />
                                <IntroSection />
                                <Gallery />
                            </>
                        );
                    case ViewState.GALLERY:
                        return <Gallery />;
                    case ViewState.MARKETPLACE:
                        return <Marketplace />;
                    case ViewState.CONTACT:
                        return <Contact />;
                    default:
                        return <Hero onNavigate={setCurrentView} />;
                }
            };

            return (
                <div className="min-h-screen flex flex-col font-sans text-stone-800 bg-paper">
                    <Navbar currentView={currentView} onChangeView={setCurrentView} />
                    
                    <main className="flex-grow">
                        {renderContent()}
                    </main>

                    <footer className="bg-thriller-black text-stone-400 py-12 border-t-4 border-thriller-red">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center gap-6">
                            <div className="text-center md:text-left">
                                <span className="font-serif text-2xl font-bold text-white tracking-tight">
                                    SERIAL <span className="text-thriller-red">THRILLERS</span>
                                </span>
                                <p className="text-sm mt-2 font-medium">Est. 2018 • Emmarentia, Johannesburg</p>
                            </div>
                            <div className="text-center md:text-right text-sm">
                                <p>&copy; {new Date().getFullYear()} Serial Thrillers Bookstore.</p>
                                <p className="mt-1 text-stone-600">All rights reserved.</p>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
